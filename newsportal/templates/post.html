{% extends 'main.html' %}
{% block title %}{{post.title}}{% endblock title %}

{% block body %}
<p></p>
<div class="container mx-auto">
  <div class="card">
  <div class="card-header">
      {{post.author}} Рейтинг автора: {{post.author.rating}}
  </div>
  <div class="container p-3">
    <div class="card-body rounded-4">
    <h5 class="card-title">{{post.title}}</h5>
    <p class="card-text">{{post.text}}</p>
      <div class="text-muted">Рейтинг статьи: {{post.rating}}</div>
  </div>
  </div>
  <div class="card-footer text-muted">
    Оцените статью! Для автора и нашего сайта это очень важно!!!
    <form action="/post/" method="post">
      {% csrf_token %}
      <input type="hidden" name="id" value="{{post.id}}">
      <div class="mb-3">
        <button class="btn btn-outline-success" name="Like" value="Like" type="submit">Лайк!</button>
        <button class="btn btn-outline-danger" name="Dislike" value="Dislike" type="submit">Дизлайк!</button>
      </div>
    </form>
  </div>
</div>
  <p></p>


<div class="card">
  <div class="card-header">
      Коментарии
  </div>

  <div class="container p-3">
    <form action="{% url 'comment_submit' %}" method="post">
      {% csrf_token %}
      <input type="hidden" name="id" value="{{post.id}}">
      <label class="form-label">Напишите свой комментарий сюда.</label>
      <textarea class="form-control" name="text" rows="3"></textarea>
      <p></p>
      <button type="submit" class="btn btn-outline-primary">Комментировать</button>

    </form>
  </div>

<div class="border rounded-down-3">
   {% if comments %}
    {%for comment in comments %}
      <div class="container p-3">
        <div class="card-body border rounded-4">
        <h5 class="card-title rounded-right w-25 border">{{comment.user}}</h5>
        <p class="card-text border rounded">{{comment.text}}</p>
          <div class="text-muted">Рейтинг: {{comment.rating}}</div>
      </div>
      </div>
    {% endfor %}
  {% else %}
      <div class="container p-3">
        <div class="card-body rounded-4">
        <h5 class="card-title rounded-2 w-50">Комментариев нет.</h5>
      </div>
      </div>
  {% endif %}
</div>


</div>
</div>
{% endblock body %}